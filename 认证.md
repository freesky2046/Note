## 基本概念

- 数字签名

- 数字证书

### 数字签名

相当于现实世界中的盖章、签字的功能在数字信息领域中的实现。数字签名**可以识别篡改和伪装**

签名生成由通信中的**发起方**进行，其过程如下所示。首先对通信内容进行哈希，然后使用**发送方的私钥**进行加密，最终得到签名。

![signature-creation](/Users/zhouming/Desktop/Note/Image/signature-creation.png)

### 签名验证

签名验证由通信中的接收方进行，其过程如下所示。一般而言，发送方会把 **消息**、**签名** 一起发送给接收方。接收方首先使用**发送方的公钥**对签名进行解密，计算得出一个摘要。然后使用消息进行哈希，计算得出另一个摘要。最后，判断两个摘要是否相等，如果相等则说明接收到的消息没有被第三方进行篡改。

![signature-validation](/Users/zhouming/Desktop/Note/Image/signature-validation.png)

### 数字证书

公钥证书也是由权威的 **认证机构（Certificate Authority，CA）** 颁发。认证机构向接收方提供发送方的证书，证书中包含了发送方的身份信息和公钥。为了防止证书在颁发过程中被篡改，认证机构会将身份信息和公钥作为消息，用 **CA 私钥** 进行签名，进而将 **身份信息**、**公钥**、**签名** 一起放入证书，如下图所示。





## 申请原理

- 开发者在本地生成密钥对，并提供开发者的身份信息。
- 将密钥对中的公钥、身份信息发送给 CA。
- CA 使用 CA 私钥对开发者的公钥、身份信息进行签名。
- CA 将开发者的公钥、身份信息、签名组装成证书以供下载。

<img src="/Users/zhouming/Desktop/Note/Image/20220417-225523.png" alt="20220417-225523" style="zoom: 25%;" />



注意：一共两对钥匙。数字签名和签名验证都是用的 CA 的钥匙对。CA公钥是在Mac的操作系统中**预先集成好**的,这样可以确保应用程序签名验证的安全性。

## 使用

iOS 证书包含开发者的信息以及开发者的公钥。Xcode 导入证书后，对 **App 打包时 Xcode 会根据证书从 Keychain 中找到与之匹配的私钥**，并使用**私钥**对 App 进行签名。

