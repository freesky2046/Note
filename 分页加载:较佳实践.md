### **分页加载要考虑哪些细节**

- 记录当前分页数，这样才能知道下一次请求分页请求什么
- 请求后要更新当前分页数

- 判断是否要继续请求下一个分页

- 再次请求第一个分页要清空现有的数据
- mj_footer 默认要进行隐藏
- 根据是否有内容决定是否展示mj_footer
- 根据是否还有更多数据决定mj_footer的结束调用哪一种结束方法
- 手多次上拉是否会多次触发 mj_footer的刷新方法
- 即有上拉又有下拉的时候，如何保证顺序

**记录当前分页数**

```swift
var page: Int 
```

**请求后要更新当前分页数**

有两种更新方式：**1.**请求发出去就更新 +1，如果失败了再-1 **2.**请求成功后再+1 .方案 2 更简单

```swift
successClosure {
	page = page + 1
}
failureClosure {
  // do nothing
}
```

**是否要继续请求下一个分页**

可以考虑用全局变量保存是否要请求下一个分页 .实际上是没必要，作为参数传递给VC 即可，这样不用考虑重置

**再次请求第一个分页要清空现有的数据**

若再次请求第一个分页，可以在发送请求的时候就清除掉本地 的 `list`

```swift
func loadData(isMore: Bool) {
   if !isMore {
     list = []
   }
}
```

